# TradingView Key Levels Indicator (关键水平指标)

这是一个 TradingView 的 Pine Script 指标，用于在图表上显示多时间周期（Multi-Timeframe, MTF）的关键价格水平（Key Levels）。它可以帮助交易者识别重要的支撑和阻力位，包括开盘价、最高价、最低价以及中间价。

## 功能特点

- **多时间周期支持**：支持显示多达 4 个不同时间周期（如日线、周线、月线、年线）的关键水平。
- **自定义显示**：可以单独开关每个时间周期的开盘价 (Open)、最高价 (High)、最低价 (Low) 和中间价 (Mid)。
- **特定星期水平**：支持追踪特定星期几（如星期一、星期二、星期五）的价格范围。
- **样式自定义**：支持自定义线条颜色、样式、宽度和标签大小。
- **智能合并**：当多个水平价格重叠时，会自动合并标签，避免图表混乱。
- **历史回溯**：线条会从周期的起始时间开始绘制，方便回溯历史走势。

## 参数设置

### 级别 1 - 4 (Level 1 - 4)
- **启用**：开启/关闭该级别的显示。
- **时间框架**：选择要显示的时间周期（4H, Daily, Weekly, Monthly, Yearly 等）。
- **颜色**：设置该级别线条和标签的颜色。
- **标签**：设置显示在图表上的标签前缀（如 "d" 代表 Daily）。
- **显示选项**：勾选 O (Open), H (High), L (Low), ½ (Mid) 来显示相应的价格线。
- **前一周期 (Previous)**：勾选 pO, pH, pL, p½ 来显示**前一个**周期的价格水平（例如昨日高点）。

### 样式设置
- **线条宽度**：调整线条粗细。
- **线条样式**：实线 (Solid)、虚线 (Dashed) 或点线 (Dotted)。
- **线条右端偏移**：设置线条向右延伸的长度。
- **显示标签**：开启/关闭价格标签显示。
- **标签大小**：调整标签字体大小。

### Day of Week Levels (特定星期水平)
- 用于标记特定星期几（如“每周一的高低点”）的价格范围，常用于在此后的交易日作为参考。

## 安装与使用

1. 打开 TradingView 图表。
2. 打开 Pine Editor（下方编辑器）。
3. 复制 `HTF_Key_Levels.pine` 的代码并粘贴到编辑器中。
4. 点击 "Add to Chart"（添加到图表）。
5. 在指标设置中根据需要调整参数。

## 许可证
Mozilla Public License 2.0
